<!DOCTYPE html>
<html>
<head>
<title>Route Helper</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<base target="_blank">
<style>
canvas {
    border: 1px solid #d3d3d3;
    background-color: #f1f1f1;
	cursor: none;
}
.hideme {
	display: none;
}
</style>
</head>
<body onload="startGame()">
<img class="hideme" id="arrow" width="338" height="256" src="MapMarkers/arrow.png" alt="An Arrow">
<img class="hideme" id="block" width="338" height="256" src="MapMarkers/block.png" alt="A Block">
<img class="hideme" id="crateria" width="6528" height="2432" src="Super_Metroid/Crateria.png" alt="Crater Map">
<img class="hideme" id="brinstar" width="6784" height="2720" src="Super_Metroid/Brinstar.png" alt="Brinstar Map">
<img class="hideme" id="norfair" width="4608" height="2328" src="Super_Metroid/Norfair.png" alt="Norfair Map">
<img class="hideme" id="wreckedship" width="1664" height="1280" src="Super_Metroid/WreckedShip.png" alt="Wrecked Ship Map">
<img class="hideme" id="maridia" width="4280" height="2584" src="Super_Metroid/Maridia.png" alt="Maridia Map">
<img class="hideme" id="tourian" width="1408" height="1688" src="Super_Metroid/Tourian.png" alt="Tourian Map">
<canvas width="1280" height="720" id="canvas"></canvas>
<script>

var mycanvas = document.getElementById("canvas");
var crateriaMap = document.getElementById("crateria");
var brinstarMap = document.getElementById("brinstar");
var norfairMap = document.getElementById("norfair");
var wreckedshipMap = document.getElementById("wreckedship");
var maridiaMap = document.getElementById("maridia");
var tourianMap = document.getElementById("tourian");
var arrowPic = document.getElementById("arrow");
var blockPic = document.getElementById("block");
var map = 0;
var scale = 1;
var type = 0;
var rotation = 0;
var mapx = 0;
var mapy = 0;
var arrowx = 0;
var arrowy = 0;
var blockx = 0;
var blocky = 0;
var curStep = 0;
var route = {};
route[0] = { stepname: "Start!", note: "Samus gains control after crash landing on Zebes!", map: 0, scale: 1, mapX: -1600, mapY: -500, arrowX: 103, arrowY: 583, rotation: 90, blockX: 1139, blockY: 26 };
route[1] = { note: "Fall down the right side, count 5 platforms, then dodge to left", map: 0, scale: 0.5, mapX: -700, mapY: -1000, arrowX: 744, arrowY: 581, rotation: 90, blockX: 505, blockY: 89 };
route[2] = { stepname: "Morphball", map: 1, scale: 1, mapX: -2400, mapY: -900, arrowX: 144, arrowY: 472, rotation: 0, blockX: 342, blockY: 485 };
route[3] = { map: 1, scale: 1, mapX: -2400, mapY: -900, arrowX: 590, arrowY: 585, rotation: 180, blockX: 210, blockY: 480 };
route[4] = { map: 1, scale: 1, mapX: -2400, mapY: -900, arrowX: 1118, arrowY: 475, rotation: 0, blockX: 588, blockY: 588 };
route[5] = { map: 1, scale: 1, mapX: -2400, mapY: -900, arrowX: 326, arrowY: 452, rotation: 270, blockX: 1148, blockY: 480 };
route[6] = { map: 0, scale: 0.5, mapX: -700, mapY: -980, arrowX: 489, arrowY: 107, rotation: 270, blockX: 760, blockY: 617 };
route[7] = { stepname: "Bomb Chozo", map: 0, scale: 1, mapX: -1400, mapY: -500, arrowX: 1105, arrowY: 302, rotation: 90, blockX: 317, blockY: 603 };
route[8] = { map: 0, scale: 0.5, mapX: -300, mapY: 0, arrowX: 238, arrowY: 377, rotation: 90, blockX: 1092, blockY: 412 };
route[9] = { map: 0, scale: 1, mapX: 200, mapY: -600, arrowX: 240, arrowY: 455, rotation: 90, blockX: 1018, blockY: 227 };
route[10] = { stepname: "Mockball for Supers", note: "You must begin jumping in to the door and then mockball under the closing shutters <a href='https://youtu.be/EYtjVlq-uNo'>like this</a>. Don't forget both missile packs in the back room.", map: 1, scale: 1, mapX: -300, mapY: -200, arrowX: 870, arrowY: 384, rotation: 0, blockX: 266, blockY: 162 };
route[11] = { map: 1, scale: 1, mapX: -300, mapY: -200, arrowX: 760, arrowY: 384, rotation: 0, blockX: 900, blockY: 394 };
route[12] = { map: 1, scale: 1, mapX: -300, mapY: -200, arrowX: 382, arrowY: 250, rotation: 180, blockX: 790, blockY: 394 };
route[13] = { map: 1, scale: 1, mapX: -300, mapY: -200, arrowX: 470, arrowY: 384, rotation: 90, blockX: 380, blockY: 256 };
route[14] = { map: 1, scale: 1, mapX: -400, mapY: -400, arrowX: 1068, arrowY: 445, rotation: 0, blockX: 385, blockY: 212 };
route[15] = { map: 1, scale: 1, mapX: -1000, mapY: -800, arrowX: 584, arrowY: 670, rotation: 180, blockX: 554, blockY: 54 };
route[16] = { map: 1, scale: 0.5, mapX: -1500, mapY: -1100, arrowX: 1174, arrowY: 633, rotation: 0, blockX: 40, blockY: 185 };
route[17] = { stepname: "Spazer", map: 1, scale: 1, mapX: -3900, mapY: -2000, arrowX: 360, arrowY: 265, rotation: 0, blockX: 85, blockY: 390 };
route[18] = { map: 1, scale: 1, mapX: -3900, mapY: -2000, arrowX: 1090, arrowY: 520, rotation: 0, blockX: 392, blockY: 272 };
route[19] = { stepname: "Varia Suit", map: 1, scale: 0.5, mapX: -4200, mapY: -1300, arrowX: 1232, arrowY: 570, rotation: 90, blockX: 480, blockY: 604 };
route[20] = { map: 1, scale: 0.5, mapX: -4200, mapY: -1300, arrowX: 320, arrowY: 616, rotation: 90, blockX: 1247, blockY: 598 };
route[21] = { map: 1, scale: 1, mapX: -4200, mapY: -2200, arrowX: 446, arrowY: 168, rotation: 90, blockX: 682, blockY: 437 };
route[22] = { map: 2, scale: 1, mapX: -400, mapY: -200, arrowX: 530, arrowY: 483, rotation: 90, blockX: 677, blockY: 156 };
route[23] = { stepname: "Hi Jump", map: 2, scale: 1, mapX: -400, mapY: -300, arrowX: 242, arrowY: 524, rotation: 90, blockX: 546, blockY: 406 };
route[24] = { map: 2, scale: 1, mapX: -400, mapY: -300, arrowX: 418, arrowY: 367, rotation: 90, blockX: 258, blockY: 549 };
route[25] = { map: 2, scale: 1, mapX: -700, mapY: -300, arrowX: 1087, arrowY: 284, rotation: 90, blockX: 134, blockY: 390 };
route[26] = { map: 2, scale: 1, mapX: -1700, mapY: -100, arrowX: 1174, arrowY: 99, rotation: 0, blockX: 85, blockY: 525 };
route[27] = { map: 2, scale: 0.5, mapX: -2400, mapY: 300, arrowX: 1001, arrowY: 259, rotation: 90, blockX: 282, blockY: 247 };
route[28] = { stepname: "Speed Booster", map: 2, scale: 1, mapX: -3900, mapY: 0, arrowX: 617, arrowY: 312, rotation: 0, blockX: 543, blockY: 321 };
route[29] = { map: 2, scale: 0.5, mapX: -2100, mapY: 300, arrowX: 524, arrowY: 410, rotation: 90, blockX: 1211, blockY: 307 };
route[30] = { stepname: "Wave Beam", map: 2, scale: 1, mapX: -2800, mapY: -200, arrowX: 692, arrowY: 368, rotation: 0, blockX: 387, blockY: 389 };
route[31] = { map: 2, scale: 1, mapX: -2300, mapY: -200, arrowX: 27, arrowY: 641, rotation: 180, blockX: 1222, blockY: 377 };
route[32] = { map: 2, scale: 1, mapX: -1400, mapY: -700, arrowX: 825, arrowY: 636, rotation: 0, blockX: 866, blockY: 148 };
route[33] = { map: 2, scale: 0.5, mapX: -400, mapY: -600, arrowX: 253, arrowY: 339, rotation: 90, blockX: 919, blockY: 368 };
route[34] = { stepname: "Grapple Beam", map: 2, scale: 0.5, mapX: 100, mapY: -900, arrowX: 108, arrowY: 565, rotation: 90, blockX: 518, blockY: 214 };
route[35] = { map: 2, scale: 1, mapX: 100, mapY: -1700, arrowX: 838, arrowY: 300, rotation: 0, blockX: 267, blockY: 420 };
route[36] = { map: 2, scale: 1, mapX: -600, mapY: -1700, arrowX: 1010, arrowY: 268, rotation: 90, blockX: 171, blockY: 309 };
route[37] = { map: 2, scale: 0.5, mapX: -400, mapY: -700, arrowX: 404, arrowY: 36, rotation: 90, blockX: 594, blockY: 642 };
route[38] = { stepname: "Ice Beam", map: 2, scale: 1, mapX: -100, mapY: -200, arrowX: 331, arrowY: 121, rotation: 0, blockX: 1148, blockY: 643 };
route[39] = { map: 2, scale: 1, mapX: -100, mapY: -100, arrowX: 963, arrowY: 229, rotation: 270, blockX: 358, blockY: 228 };
route[40] = { map: 1, scale: 0.5, mapX: -2900, mapY: -1100, arrowX: 463, arrowY: 159, rotation: 90, blockX: 875, blockY: 635 };
route[41] = { map: 1, scale: 1, mapX: -3400, mapY: -900, arrowX: 307, arrowY: 559, rotation: 90, blockX: 467, blockY: 590 };
route[42] = { map: 1, scale: 1, mapX: -3400, mapY: -900, arrowX: 424, arrowY: 163, rotation: 0, blockX: 337, blockY: 598 };
route[43] = { map: 1, scale: 1, mapX: -3500, mapY: -500, arrowX: 634, arrowY: 347, rotation: 270, blockX: 381, blockY: 572 };
route[44] = { map: 0, scale: 1, mapX: -3100, mapY: -400, arrowX: 800, arrowY: 173, rotation: 0, blockX: 537, blockY: 568 };
route[45] = { map: 0, scale: 1, mapX: -3900, mapY: -200, arrowX: 1153, arrowY: 358, rotation: 0, blockX: 60, blockY: 378 };
route[46] = { map: 3, scale: 1, mapX: 0, mapY: -300, arrowX: 315, arrowY: 496, rotation: 90, blockX: 337, blockY: 265 };
route[47] = { stepname: "Phantoom", map: 3, scale: 1, mapX: -200, mapY: -600, arrowX: 1054, arrowY: 537, rotation: 90, blockX: 131, blockY: 220 };
route[48] = { map: 3, scale: 1, mapX: -500, mapY: -600, arrowX: 1016, arrowY: 323, rotation: 90, blockX: 768, blockY: 608 };
route[49] = { map: 3, scale: 1, mapX: -500, mapY: -600, arrowX: 230, arrowY: 338, rotation: 180, blockX: 1031, blockY: 347 };
route[50] = { map: 3, scale: 1, mapX: -500, mapY: -300, arrowX: 591, arrowY: 86, rotation: 90, blockX: 226, blockY: 647 };
route[51] = { map: 3, scale: 0.5, mapX: 0, mapY: 200, arrowX: 765, arrowY: 87, rotation: 90, blockX: 561, blockY: 309 };
route[52] = { map: 3, scale: 0.5, mapX: 300, mapY: 500, arrowX: 318, arrowY: 265, rotation: 180, blockX: 929, blockY: 262 };
route[53] = { map: 0, scale: 1, mapX: -4000, mapY: 100, arrowX: 330, arrowY: 108, rotation: 180, blockX: 1081, blockY: 154 };
route[54] = { map: 0, scale: 1, mapX: -4000, mapY: 100, arrowX: 82, arrowY: 433, rotation: 90, blockX: 328, blockY: 119 };
route[55] = { map: 0, scale: 1, mapX: -4000, mapY: 100, arrowX: 797, arrowY: 401, rotation: 0, blockX: 112, blockY: 471 };
route[56] = { stepname: "Walking Chozo", map: 3, scale: 1, mapX: 0, mapY: 0, arrowX: 607, arrowY: 290, rotation: 0, blockX: 82, blockY: 309 };
route[57] = { map: 3, scale: 1, mapX: 0, mapY: 0, arrowX: 523, arrowY: 387, rotation: 90, blockX: 221, blockY: 439 };
route[58] = { map: 3, scale: 1, mapX: 0, mapY: 0, arrowX: 708, arrowY: 161, rotation: 90, blockX: 537, blockY: 411 };
route[59] = { stepname: "Gravity Suit", map: 3, scale: 1, mapX: 0, mapY: 0, arrowX: 98, arrowY: 410, rotation: 90, blockX: 721, blockY: 184 };
route[60] = { map: 3, scale: 1, mapX: 0, mapY: 0, arrowX: 62, arrowY: 430, rotation: 180, blockX: 113, blockY: 434 };
route[61] = { map: 0, scale: 1, mapX: -3700, mapY: -100, arrowX: 391, arrowY: 582, rotation: 90, blockX: 1124, blockY: 338 };
route[62] = { map: 0, scale: 1, mapX: -3300, mapY: -200, arrowX: 175, arrowY: 359, rotation: 180, blockX: 805, blockY: 506 };
route[63] = { map: 0, scale: 1, mapX: -2400, mapY: 0, arrowX: 1138, arrowY: 140, rotation: 90, blockX: 890, blockY: 568 };
route[64] = { stepname: "Wrap-Around Shot", note: "This isn't required but makes it much easier. Do a wrap-around shot on the right <a href='https://youtu.be/79Zmx8eLdkc'>like this</a> and then shinespark all the way left from the next ledge down.", map: 0, scale: 0.5, mapX: -1200, mapY: 400, arrowX: 93, arrowY: 315, rotation: 90, blockX: 1159, blockY: 280 };
route[65] = { map: 0, scale: 1, mapX: -400, mapY: 0, arrowX: 323, arrowY: 428, rotation: 90, blockX: 1026, blockY: 298 };
route[66] = { map: 0, scale: 1, mapX: -400, mapY: 0, arrowX: 235, arrowY: 428, rotation: 90, blockX: 338, blockY: 450 };
route[67] = { map: 0, scale: 1, mapX: 200, mapY: -400, arrowX: 238, arrowY: 659, rotation: 90, blockX: 848, blockY: 52 };
route[68] = { map: 1, scale: 0.5, mapX: 600, mapY: -200, arrowX: 362, arrowY: 546, rotation: 90, blockX: 579, blockY: 69 };
route[69] = { map: 1, scale: 1, mapX: 100, mapY: -900, arrowX: 135, arrowY: 440, rotation: 90, blockX: 262, blockY: 462 };
route[70] = { map: 1, scale: 1, mapX: 100, mapY: -900, arrowX: 1071, arrowY: 63, rotation: 90, blockX: 151, blockY: 463 };
route[71] = { map: 1, scale: 1, mapX: -500, mapY: -600, arrowX: 1046, arrowY: 300, rotation: 90, blockX: 481, blockY: 388 };
route[72] = { map: 1, scale: 1, mapX: -1100, mapY: -800, arrowX: 207, arrowY: 268, rotation: 90, blockX: 462, blockY: 124 };
route[73] = { map: 1, scale: 1, mapX: -1300, mapY: -800, arrowX: 1189, arrowY: 396, rotation: 90, blockX: 22, blockY: 292 };
route[74] = { map: 1, scale: 1, mapX: -1300, mapY: -800, arrowX: 814, arrowY: 285, rotation: 90, blockX: 1190, blockY: 432 };
route[75] = { map: 1, scale: 1, mapX: -1300, mapY: -800, arrowX: 231, arrowY: 523, rotation: 90, blockX: 815, blockY: 319 };
route[76] = { map: 1, scale: 1, mapX: -400, mapY: -1200, arrowX: -5, arrowY: 523, rotation: 90, blockX: 1146, blockY: 147 };
route[77] = { map: 1, scale: 0.5, mapX: -100, mapY: -900, arrowX: 1067, arrowY: 257, rotation: 90, blockX: 163, blockY: 422 };
route[78] = { map: 1, scale: 0.5, mapX: -2000, mapY: -1200, arrowX: 1051, arrowY: 581, rotation: 0, blockX: 132, blockY: 130 };
route[79] = { stepname: "Maridia Entrance", map: 4, scale: 0.5, mapX: 900, mapY: -1100, arrowX: 510, arrowY: 205, rotation: 90, blockX: 488, blockY: 636 };
route[80] = { map: 4, scale: 0.5, mapX: 900, mapY: -1100, arrowX: 1027, arrowY: 227, rotation: 90, blockX: 527, blockY: 261 };
route[81] = { map: 4, scale: 1, mapX: -200, mapY: -1400, arrowX: 1052, arrowY: 378, rotation: 0, blockX: 994, blockY: 220 };
route[82] = { map: 4, scale: 1, mapX: -200, mapY: -1400, arrowX: 11, arrowY: 50, rotation: 90, blockX: 1081, blockY: 386 };
route[83] = { map: 4, scale: 0.5, mapX: 400, mapY: -400, arrowX: 893, arrowY: 183, rotation: 90, blockX: 306, blockY: 526 };
route[84] = { map: 4, scale: 1, mapX: -200, mapY: -400, arrowX: 92, arrowY: 425, rotation: 0, blockX: 1210, blockY: 451 };
route[85] = { map: 4, scale: 1, mapX: -200, mapY: -400, arrowX: 208, arrowY: 434, rotation: 180, blockX: 137, blockY: 420 };
route[86] = { stepname: "Botwoon", map: 4, scale: 0.5, mapX: 0, mapY: -400, arrowX: 931, arrowY: 308, rotation: 90, blockX: 191, blockY: 203 };
route[87] = { map: 4, scale: 0.5, mapX: -1800, mapY: -400, arrowX: 1200, arrowY: 240, rotation: 90, blockX: 49, blockY: 348 };
route[88] = { stepname: "Space Jump", map: 4, scale: 1, mapX: -3400, mapY: -800, arrowX: 251, arrowY: 525, rotation: 90, blockX: 826, blockY: 161 };
route[89] = { map: 4, scale: 0.5, mapX: -1600, mapY: -400, arrowX: 69, arrowY: 584, rotation: 90, blockX: 1042, blockY: 475 };
route[90] = { map: 4, scale: 1, mapX: -1200, mapY: -1600, arrowX: 494, arrowY: 256, rotation: 0, blockX: 577, blockY: 243 };
route[91] = { map: 4, scale: 1, mapX: -1200, mapY: -1600, arrowX: 698, arrowY: 299, rotation: 90, blockX: 524, blockY: 266 };
route[92] = { stepname: "Spring Ball", map: 4, scale: 1, mapX: -1800, mapY: -1600, arrowX: 1242, arrowY: 475, rotation: 90, blockX: 113, blockY: 322 };
route[93] = { map: 4, scale: 0.5, mapX: -1100, mapY: -1200, arrowX: 252, arrowY: 392, rotation: 270, blockX: 961, blockY: 448 };
route[94] = { stepname: "Plasma Beam", map: 4, scale: 1, mapX: -1500, mapY: 0, arrowX: 909, arrowY: 283, rotation: 90, blockX: 146, blockY: 616 };
route[95] = { map: 4, scale: 0.5, mapX: -1200, mapY: 0, arrowX: 629, arrowY: 501, rotation: 90, blockX: 594, blockY: 154 };
route[96] = { map: 4, scale: 1, mapX: -1600, mapY: -900, arrowX: 324, arrowY: 300, rotation: 90, blockX: 885, blockY: 179 };
route[97] = { map: 4, scale: 1, mapX: -1600, mapY: -900, arrowX: 451, arrowY: 295, rotation: 90, blockX: 337, blockY: 327 };
route[98] = { map: 4, scale: 1, mapX: -1200, mapY: -1000, arrowX: 301, arrowY: 665, rotation: 90, blockX: 851, blockY: 234 };
route[99] = { map: 4, scale: 1, mapX: -1000, mapY: -1600, arrowX: 434, arrowY: 201, rotation: 90, blockX: 519, blockY: 242 };
route[100] = { map: 4, scale: 1, mapX: -1000, mapY: -1600, arrowX: 362, arrowY: 204, rotation: 90, blockX: 437, blockY: 240 };
route[101] = { map: 4, scale: 1, mapX: -300, mapY: -1800, arrowX: 73, arrowY: 573, rotation: 0, blockX: 1093, blockY: 37 };
route[102] = { map: 1, scale: 1, mapX: -4500, mapY: -2100, arrowX: 937, arrowY: 287, rotation: 0, blockX: 125, blockY: 290 };
route[103] = { map: 1, scale: 1, mapX: -4500, mapY: -2100, arrowX: 147, arrowY: 270, rotation: 90, blockX: 982, blockY: 279 };
route[104] = { map: 2, scale: 1, mapX: 0, mapY: -200, arrowX: 18, arrowY: 384, rotation: 180, blockX: 1078, blockY: 154 };
route[105] = { map: 2, scale: 0.5, mapX: 0, mapY: -300, arrowX: 1156, arrowY: 452, rotation: 0, blockX: 9, blockY: 144 };
route[106] = { map: 2, scale: 1, mapX: -2100, mapY: -1000, arrowX: 372, arrowY: 338, rotation: 90, blockX: 349, blockY: 231 };
route[107] = { stepname: "Drain Lava Chozo", map: 2, scale: 1, mapX: -1600, mapY: -1500, arrowX: 74, arrowY: 203, rotation: 90, blockX: 886, blockY: 244 };
route[108] = { map: 2, scale: 1, mapX: -1600, mapY: -1500, arrowX: 530, arrowY: 465, rotation: 90, blockX: 91, blockY: 226 };
route[109] = { map: 2, scale: 1, mapX: -1600, mapY: -1500, arrowX: 594, arrowY: 465, rotation: 90, blockX: 531, blockY: 500 };
route[110] = { stepname: "Screw Attack", map: 2, scale: 1, mapX: -1600, mapY: -1500, arrowX: 770, arrowY: 592, rotation: 90, blockX: 622, blockY: 501 };
route[111] = { map: 2, scale: 0.5, mapX: -1800, mapY: -1000, arrowX: 768, arrowY: 153, rotation: 90, blockX: 275, blockY: 557 };
route[112] = { map: 2, scale: 1, mapX: -3300, mapY: -1200, arrowX: 546, arrowY: 665, rotation: 0, blockX: 78, blockY: 170 };
route[113] = { stepname: "Ridley Tank", map: 2, scale: 0.5, mapX: -2200, mapY: -1400, arrowX: 213, arrowY: 456, rotation: 270, blockX: 851, blockY: 228 };
route[114] = { map: 2, scale: 0.5, mapX: -2300, mapY: -1000, arrowX: 1136, arrowY: 202, rotation: 180, blockX: 166, blockY: 630 };
route[115] = { map: 2, scale: 0.5, mapX: -3200, mapY: -300, arrowX: 533, arrowY: 166, rotation: 90, blockX: 658, blockY: 557 };
route[116] = { map: 2, scale: 1, mapX: -3400, mapY: -500, arrowX: 1183, arrowY: 342, rotation: 180, blockX: 904, blockY: 200 };
route[117] = { map: 2, scale: 1, mapX: -3400, mapY: -500, arrowX: 70, arrowY: 220, rotation: 0, blockX: 1169, blockY: 335 };
route[118] = { map: 2, scale: 1, mapX: -2400, mapY: -200, arrowX: 43, arrowY: 116, rotation: 90, blockX: 1114, blockY: 517 };
route[119] = { stepname: "Norfair Reserve Tank", map: 2, scale: 1, mapX: -1700, mapY: 0, arrowX: 342, arrowY: 293, rotation: 90, blockX: 757, blockY: 339 };
route[120] = { map: 2, scale: 1, mapX: -1700, mapY: 0, arrowX: 384, arrowY: 321, rotation: 90, blockX: 358, blockY: 316 };
route[121] = { map: 2, scale: 1, mapX: -1900, mapY: -200, arrowX: 799, arrowY: 516, rotation: 90, blockX: 197, blockY: 147 };
route[122] = { map: 2, scale: 0.5, mapX: -700, mapY: 200, arrowX: 168, arrowY: 242, rotation: 270, blockX: 1011, blockY: 461 };
route[123] = { stepname: "X-Ray", map: 1, scale: 0.5, mapX: -2200, mapY: -1600, arrowX: 50, arrowY: 159, rotation: 90, blockX: 1225, blockY: 386 };
route[124] = { map: 1, scale: 0.5, mapX: -1500, mapY: -1000, arrowX: 411, arrowY: 151, rotation: 90, blockX: 427, blockY: 493 };
route[125] = { map: 1, scale: 1, mapX: -2300, mapY: -1000, arrowX: 1102, arrowY: 346, rotation: 270, blockX: 63, blockY: 370 };
route[126] = { stepname: "Billy Mayes", note: "But wait, there's more!", map: 1, scale: 1, mapX: -2700, mapY: -1000, arrowX: 361, arrowY: 137, rotation: 0, blockX: 718, blockY: 339 };
route[127] = { map: 1, scale: 1, mapX: -2700, mapY: -1000, arrowX: 406, arrowY: 84, rotation: 90, blockX: 404, blockY: 131 };
route[128] = { map: 1, scale: 1, mapX: -2500, mapY: -1000, arrowX: 226, arrowY: 359, rotation: 270, blockX: 622, blockY: 107 };
route[129] = { map: 0, scale: 1, mapX: -1300, mapY: -1800, arrowX: 481, arrowY: 568, rotation: 0, blockX: 931, blockY: 433 };
route[130] = { map: 0, scale: 0.5, mapX: -800, mapY: -1000, arrowX: 773, arrowY: 68, rotation: 90, blockX: 507, blockY: 671 };
route[131] = { stepname: "Last Item!", map: 0, scale: 1, mapX: -1200, mapY: -700, arrowX: 92, arrowY: 208, rotation: 90, blockX: 1170, blockY: 510 };
route[132] = { stepname: "Golden 4", map: 0, scale: 1, mapX: -600, mapY: -500, arrowX: 847, arrowY: 628, rotation: 90, blockX: 721, blockY: 446 };
route[133] = { map: 5, scale: 1, mapX: -100, mapY: -300, arrowX: 600, arrowY: 666, rotation: 0, blockX: 1106, blockY: 55 };
route[134] = { stepname: "Mother Brain", map: 5, scale: 1, mapX: 100, mapY: -900, arrowX: 355, arrowY: 315, rotation: 0, blockX: 887, blockY: 75 };
route[135] = { stepname: "Escape", map: 5, scale: 1, mapX: 100, mapY: -900, arrowX: 927, arrowY: 451, rotation: 0, blockX: 376, blockY: 334 };
route[136] = { map: 5, scale: 1, mapX: -400, mapY: -900, arrowX: 813, arrowY: 195, rotation: 0, blockX: 514, blockY: 458 };
route[137] = { map: 0, scale: 0.5, mapX: -700, mapY: -1000, arrowX: 489, arrowY: 96, rotation: 270, blockX: 427, blockY: 609 };
route[138] = { stepname: "End!", map: 0, scale: 1, mapX: -1600, mapY: -500, arrowX: 1125, arrowY: 8, rotation: 90, blockX: 117, blockY: 606 };

function startGame() {
    myGameArea.start();
	myArrow = new arrow(arrowPic, 50, 37);
	myBlock = new block(blockPic, 20, 20);
	craterBG = new background(crateriaMap, 6528, 2432);
	brinstarBG = new background(brinstarMap, 6784, 2720);
	norfairBG = new background(norfairMap, 4608, 2328);
	wreckedshipBG = new background(wreckedshipMap, 1664, 1280);
	maridiaBG = new background(maridiaMap, 4280, 2584);
	tourianBG = new background(tourianMap, 1408, 1688);
	createStepList();
}

var myGameArea = {
    canvas : mycanvas,
    start : function() {
        this.context = this.canvas.getContext("2d");
		this.interval = setInterval(updateGameArea, 50);
    },
	clear : function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
		this.context.fillStyle = 'black';
		this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);
    }
}

function arrow(image, width, height) {
    this.width = width;
    this.height = height;
	this.x = 0;
	this.y = 0;
	this.rot = 0;
	this.updatePosition = function(x, y, rot) {
		this.x = x;
		this.y = y;
		this.rot = rot;
	}
    this.update = function(){
		if (this.x != 0 && this.y != 0) {
			ctx = myGameArea.context;
			ctx.translate(this.x+this.width/2, this.y+this.height/2);
			ctx.rotate(this.rot*Math.PI/180);
			ctx.drawImage(image, -this.width/2, -this.height/2, this.width, this.height);
			ctx.resetTransform();
		}
    }
}

function block(image, width, height) {
    this.width = width;
    this.height = height;
	this.x = 0;
	this.y = 0;
	this.updatePosition = function(x, y) {
		this.x = x;
		this.y = y;
	}
    this.update = function(){
		if (this.x != 0 && this.y != 0) {
			ctx = myGameArea.context;
			ctx.translate(this.x+this.width/2, this.y+this.height/2);
			ctx.drawImage(image, -this.width/2, -this.height/2, this.width, this.height);
			ctx.resetTransform();
		}
    }
}

function background(image, width, height) {
    this.width = width;
    this.height = height;
	this.x = 0;
	this.y = 0;
	this.updatePosition = function(x, y) {
		this.x = x;
		this.y = y;
	}
    this.update = function(){
		ctx = myGameArea.context;
		ctx.scale(scale, scale);
        ctx.drawImage(image, this.x, this.y, this.width, this.height);
		ctx.setTransform(1,0,0,1,0,0);
    }
}

function updateGameArea() {
    myGameArea.clear();
	switch (map) {
		case 0:
			craterBG.update();
			mapx = craterBG.x;
			mapy = craterBG.y;
			break;
		case 1:
			brinstarBG.update();
			mapx = brinstarBG.x;
			mapy = brinstarBG.y;
			break;
		case 2:
			norfairBG.update();
			mapx = norfairBG.x;
			mapy = norfairBG.y;
			break;
		case 3:
			wreckedshipBG.update();
			mapx = wreckedshipBG.x;
			mapy = wreckedshipBG.y;
			break;
		case 4:
			maridiaBG.update();
			mapx = maridiaBG.x;
			mapy = maridiaBG.y;
			break;
		case 5:
			tourianBG.update();
			mapx = tourianBG.x;
			mapy = tourianBG.y;
			break;
	}
    myArrow.update();
	myBlock.update();
	<!-- ctx.fillStyle = '#ddd'; -->
    <!-- ctx.fillRect(x + 40, y + 40, 80, 25); -->
    <!-- ctx.fillStyle = '#000'; -->
    <!-- ctx.font = 'bold 20px verdana'; -->
    <!-- ctx.fillText(str, x + 50, y + 60, 60); -->
	
	<!-- strtwo = 'X : ' + mapx + ', ' + 'Y : ' + mapy; -->
	<!-- ctx.fillStyle = '#ddd'; -->
    <!-- ctx.fillRect(x + 40, y + 70, 80, 25); -->
    <!-- ctx.fillStyle = '#000'; -->
    <!-- ctx.font = 'bold 20px verdana'; -->
    <!-- ctx.fillText(strtwo, x + 50, y + 90, 60); -->
	
	<!-- ctx.fillStyle = '#ddd'; -->
    <!-- ctx.fillRect(x + 40, y + 100, 80, 25); -->
    <!-- ctx.fillStyle = '#000'; -->
    <!-- ctx.font = 'bold 20px verdana'; -->
    <!-- ctx.fillText('curStep: ' + curStep, x + 50, y + 120, 60); -->
	if(type == 0) {
		ctx.translate(x+myBlock.width/2, y+myBlock.height/2);
        ctx.drawImage(blockPic, -myBlock.width/2, -myBlock.height/2, myBlock.width, myBlock.height);
		ctx.resetTransform();
	}
	else if(type == 1) {	
	 	ctx.translate(x+myArrow.width/2, y+myArrow.height/2);
		ctx.rotate(rotation*Math.PI/180);
        ctx.drawImage(arrowPic, -myArrow.width/2, -myArrow.height/2, myArrow.width, myArrow.height);
		ctx.resetTransform();
	}
}

function updatemap(stepSelect) {
	switch (stepSelect) {
		case "first":
			curStep = 0;
			break;
		case "next":
			curStep += 1;
			break;
		case "prev":
			curStep -= 1;
			break;
		case "last":
			curStep = Object.keys(route).length - 1;
			break;
		default:
			curStep = stepSelect;
			break;
	}
	if (curStep < 0) { curStep = 0; } else if (curStep > (Object.keys(route).length - 1)) { curStep = Object.keys(route).length - 1; }
	updateStepDivs();
	area = route[curStep];
	map = area.map;
	scale = area.scale;
		switch (map) {
		case 0:
			craterBG.updatePosition(area.mapX, area.mapY);
			break;
		case 1:
			brinstarBG.updatePosition(area.mapX, area.mapY);
			break;
		case 2:
			norfairBG.updatePosition(area.mapX, area.mapY);
			break;
		case 3:
			wreckedshipBG.updatePosition(area.mapX, area.mapY);
			break;
		case 4:
			maridiaBG.updatePosition(area.mapX, area.mapY);
			break;
		case 5:
			tourianBG.updatePosition(area.mapX, area.mapY);
			break;
	}
	myArrow.updatePosition(area.arrowX, area.arrowY, area.rotation);
	myBlock.updatePosition(area.blockX, area.blockY);
}

function showmap(num) {
	scale = 1;
	map = num;
		switch (map) {
		case 0:
			craterBG.updatePosition(0, 0);
			break;
		case 1:
			brinstarBG.updatePosition(0, 0);
			break;
		case 2:
			norfairBG.updatePosition(0, 0);
			break;
		case 3:
			wreckedshipBG.updatePosition(0, 0);
			break;
		case 4:
			maridiaBG.updatePosition(0, 0);
			break;
		case 5:
			tourianBG.updatePosition(0, 0);
			break;
	}
	myArrow.updatePosition(0, 0, 0);
	myBlock.updatePosition(0, 0);
}

function makecode(){
  var codebox = document.getElementById("codebox");
  codebox.value = "route[" + Object.keys(route).length + "] = { map: " + map + ", scale: " + scale + ", mapX: " + mapx + ", mapY: " + mapy + ", arrowX: " + arrowx + ", arrowY: " + arrowy + ", rotation: " + rotation + ", blockX: " + blockx + ", blockY: " + blocky + " };";
}

function changecursor(num) {
	type = num;
}

function rotateme() {
	rotation += 90;
	if (rotation >= 360) {
		rotation = 0;
	}
}

function mapmovex(num) {
		switch (map) {
		case 0:
			craterBG.x += num
			break;
		case 1:
			brinstarBG.x += num
			break;
		case 2:
			norfairBG.x += num
			break;
		case 3:
			wreckedshipBG.x += num
			break;
		case 4:
			maridiaBG.x += num
			break;
		case 5:
			tourianBG.x += num
			break;
	}
}

function mapmovey(num) {
		switch (map) {
		case 0:
			craterBG.y += num
			break;
		case 1:
			brinstarBG.y += num
			break;
		case 2:
			norfairBG.y += num
			break;
		case 3:
			wreckedshipBG.y += num
			break;
		case 4:
			maridiaBG.y += num
			break;
		case 5:
			tourianBG.y += num
			break;
	}
}

function mapscale() {
	if (scale == 0.5) {
		scale = 1;
	} else {
		scale = 0.5;
	}
}

function updateStepDivs() {
	//document.getElementById("curstepdiv").innerText = "Current Step Index: " + curStep;
	if(route[curStep].stepname != null) {
		stepname = route[curStep].stepname;
	} else {
		stepname = "Step " + (curStep + 1);
	}
	document.getElementById("stepnamediv").innerText = stepname;
	
	if(route[curStep].note != null) {
		stepnote = route[curStep].note;
	} else {
		stepnote = ""
	}
	document.getElementById("stepnotediv").innerHTML = stepnote;
}

var x = 0;
var y = 0;
var str = "";
$(function() {
  var ctx = mycanvas.getContext('2d');

  canvas.addEventListener('mousemove', function(e) {
    x = e.pageX - canvas.offsetLeft;
    y = e.pageY - canvas.offsetTop;
    str = 'X : ' + x + ', ' + 'Y : ' + y;
	
  }, 0);
});

$( "#canvas" ).click(function() {
  if (type == 0) {
	blockx = x;
	blocky = y;
	myBlock.updatePosition(blockx, blocky);
	document.getElementById("blockdiv").innerText = "Block: " + blockx + ", " + blocky;
  } else {
	arrowx = x;
	arrowy = y;
	myArrow.updatePosition(arrowx, arrowy, rotation);
	document.getElementById("arrowdiv").innerText = "Arrow: " + arrowx + ", " + arrowy;
  }
});

$(document).keydown(function(e){
    if (e.which == 37){
        $("#prevbtn").click();
    } else if (e.which == 39){
        $("#nextbtn").click();
    }
});

function createStepList() {
	for (var mystep in route) {
		var steplink = document.createElement("a");
		steplink.setAttribute("href", "#");
		steplink.setAttribute("target", "_self");
		steplink.setAttribute("onclick", "updatemap(" + mystep + ");");
		var stepname = "Step " + (parseInt(mystep) + 1);
		if (route[mystep].stepname != null) {
			stepname = route[mystep].stepname;
		}
		steplink.innerText = stepname;
		
		var br = document.createElement("br");
		var element = document.getElementById("steplist");
		element.appendChild(steplink);
		
		if (route[mystep].note != null) {
			var p = document.createElement("a");
			p.innerHTML = " " + route[mystep].note;
			element.append(p);
		}

		element.appendChild(br);
	}
}
</script>
<br>
<button onclick="updatemap('first')">First</button>
<button onclick="updatemap('prev')" id="prevbtn">Prev</button>
<button onclick="updatemap('next')" id="nextbtn">Next</button>
<button onclick="updatemap('last')">Last</button>

<button onclick="changecursor(0)">Block</button>
<button onclick="changecursor(1)">Arrow</button>
<button onclick="rotateme()">Rotate Arrow</button>
<button onclick="mapmovex(-100)">Map Left</button>
<button onclick="mapmovex(100)">Map Right</button>
<button onclick="mapmovey(-100)">Map Up</button>
<button onclick="mapmovey(100)">Map Down</button>
<button onclick="mapscale()">Toggle Scale</button>
<button onclick="makecode()">Make Code</button>
<input type="text" id="codebox" readonly="readonly"></input>
<br>
<br>
<button onclick="showmap(0)">Crateria</button>
<button onclick="showmap(1)">Brinstar</button>
<button onclick="showmap(2)">Norfair</button>
<button onclick="showmap(3)">Wrecked Ship</button>
<button onclick="showmap(4)">Maridia</button>
<button onclick="showmap(5)">Tourian</button>
<br>
<br>
<div id="blockdiv"></div><div id="arrowdiv"></div><div id="curstepdiv"></div>
<hr>
<div id="stepdetails">
<div id="stepnamediv"></div>
<p id="stepnotediv"></p>
</div>
<hr>
<div id="steplist"></div>
</body>
</html>
